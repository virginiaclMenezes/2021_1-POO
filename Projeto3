using System;

//Classe principal
class MainClass
{
    public static void Main()
    {
        Curso c1 = new Curso(1, "TADS");
        Curso c2 = new Curso(2, "REDES");
        Console.WriteLine(c1);
        Console.WriteLine(c2);

        Matricula m1 = new Matricula(20191014040076, "Ativa");
        Matricula m2 = new Matricula(20191014040004, "Ativa");
        Matricula m3 = new Matricula(20151014040016, "Ativa");
        Matricula m4 = new Matricula(20191014040010, "Cancelada");
        Console.WriteLine(m1);
        Console.WriteLine(m2);
        Console.WriteLine(m3);
        Console.WriteLine(m4);

        Aluno a1 = new Aluno(001, "Joana", "Rua Dois, 00", 990225632, m1);
        Aluno a2 = new Aluno(002, "Virginia", "Rua Três, 05", 990725633, m2);
        Aluno a3 = new Aluno(003, "Christian", "Rua Quatro, 08", 995225634, m4);
        Console.WriteLine(a1);
        Console.WriteLine(a2);
        Console.WriteLine(a3);

        m1.AlunoInserir(a1);
        m2.AlunoInserir(a2);
        m3.AlunoInserir(a2);
        m4.AlunoInserir(a3);

        Aluno[]v = m1.AlunoListar();
        Console.Write("Alunos com matricula:");
        Console.WriteLine(m1.GetId());
        foreach (Aluno a in v) Console.WriteLine(a);

        Console.WriteLine();
        v = m2.AlunoListar();
        Console.Write("Alunos com matricula:");
        Console.WriteLine(m2.GetId());
        foreach (Aluno a in v) Console.WriteLine(a);

        Console.WriteLine();
        v = m3.AlunoListar();
        Console.Write("Alunos com matricula:");
        Console.WriteLine(m3.GetId());
        foreach (Aluno a in v) Console.WriteLine(a);

        Console.WriteLine();
        v = m4.AlunoListar();
        Console.Write("Alunos com matricula cancelada:");
        Console.WriteLine(m4.GetId());
        foreach (Aluno a in v) Console.WriteLine(a);
    }
}

//Classe de Cursos
class Curso
{
    private int id;
    private string descricao;

    public Curso(int id, string descricao)
    {
        this.id = id;
        this.descricao = descricao;
    }

    public void SetId(int id)
    {
        this.id = id;
    }

    public void SetDescricao(string descricao)
    {
        this.descricao = descricao;
    }

    public int GetId()
    {
        return id;
    }

    public string GetDescricao()
    {
        return descricao;
    }

    public override string ToString()
    {
        return id + " - " + descricao;
    }
}

//Classe de Matricula
class Matricula
{
    private long id;
    private string descricao;
    private Aluno[] alunos = new Aluno[10];
    private int np;

    public Matricula(long id, string descricao)
    {
        this.id = id;
        this.descricao = descricao;
    }

    public void SetId(long id)
    {
        this.id = id;
    }

    public void SetDescricao(string descricao)
    {
        this.descricao = descricao;
    }

    public long GetId()
    {
        return id;
    }

    public string GetDescricao()
    {
        return descricao;
    }

    public Aluno[] AlunoListar()
    {
        Aluno[] c = new Aluno[np];
        Array.Copy(alunos, c, np);
        return c;
    }

    public void AlunoInserir (Aluno a)
    {
        if(np ==alunos.Length) {
            Array.Resize(ref alunos, 2 * alunos.Length);
        }
        alunos[np] = a;
        np++;
    }
    public override string ToString()
    {
        return "Matrícula: " + id + " - " + "Tipo: " + descricao;
    }
}

//Classe Aluno
class Aluno
{
    private int id;
    private string nome;
    private string endereco;
    private int telefone;
    private Matricula matricula;

    public Aluno(int id, string nome, string endereco, int telefone)
    {
        this.id = id;
        this.nome = nome;
        this.endereco = endereco;
        this.telefone = telefone > 0 ? telefone : 0;
    }
    public Aluno(int id, string nome, string endereco, int telefone, Matricula matricula) : this(id, nome, endereco, telefone)
    {
        this.matricula = matricula;
    }
    public void SetId(int id)
    {
        this.id = id;
    }

    public void SetNome(string nome)
    {
        this.nome = nome;
    }

    public void SetEndereco(string endereco)
    {
        this.endereco = endereco;
    }

    public void SetTelefone(int telefone)
    {
        this.telefone = telefone > 0 ? telefone : 0;
    }

    public void SetMatricula(Matricula matricula)
    {
        this.matricula = matricula;
    }

    public int GetId()
    {
        return id;
    }

    public string GetNome()
    {
        return nome;
    }

    public string GetEndereco()
    {
        return endereco;
    }

    public int GetTelefone()
    {
        return telefone;
    }

    public Matricula GetMatricula()
    {
        return matricula;
    }
    public override string ToString()
    {
        if (matricula == null)
            return id + " - " + "Aluno(a): " + nome + " - Endereço: " + endereco + " - Telefone: " + telefone.ToString("0");
        else
            return id + " - " + "Aluno(a): " + matricula.GetId() + nome + " - Endereço: " + endereco + " - Telefone: " + telefone.ToString("0");

    }
}
